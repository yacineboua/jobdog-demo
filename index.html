<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Jobdog Swipe Demo</title>
  <style>
    body { font-family: sans-serif; display:flex; justify-content:center; padding:50px; }
    #card {
      width:320px; padding:24px; background:#fff;
      border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.05);
    }
    h2 { margin:0 0 8px; font-size:20px; }
    h4 { margin:0 0 12px; color:#555; }
    p { font-size:14px; color:#666; line-height:1.4; }
    .buttons { display:flex; justify-content:space-between; margin-top:16px; }
    button {
      padding:8px 16px; border:none; border-radius:4px; cursor:pointer;
    }
    .no { background:#f5f5f5; }
    .yes { background:#1F4E79; color:#fff; }
  </style>
</head>
<body>
  <div id="card">
    <h2 id="title"></h2>
    <h4 id="company"></h4>
    <p id="desc"></p>
    <div class="buttons">
      <button class="no" id="noBtn">Skip</button>
      <button class="yes" id="yesBtn">Apply</button>
    </div>
  </div>
  <script>
    let jobs = [], idx = 0;
    async function loadJobs() {
      jobs = await fetch('jobs.json').then(r=>r.json());
      showJob();
    }
    function showJob() {
      const card = document.getElementById('card');
      if (idx >= jobs.length) {
        card.innerHTML = '<p style="text-align:center;color:#555;">No more jobs!</p>';
        return;
      }
      const job = jobs[idx];
      document.getElementById('title').textContent    = job.title;
      document.getElementById('company').textContent  = job.company;
      document.getElementById('desc').textContent     = job.description;
    }
    document.getElementById('noBtn').onclick = () => { idx++; showJob(); };
    document.getElementById('yesBtn').onclick = () => {
    const job = jobs[idx];
    console.log('âœ… Swiped Yes on', job);

    // ðŸ‘‡ Trigger the contacts modal with the job's company
    showContactsModal(job.company || job.employer_name, "engineering");

    idx++;
    showJob();
    };
    loadJobs();
    // Contact Suggestions Modal
    function getContactLinks(company, role = "engineering") {
    const roleTerms = {
        engineering: ["Technical Recruiter", "Software Engineer", "Eng Manager"],
        product: ["Product Manager", "UX Designer", "PM Lead"],
        marketing: ["Marketing Manager", "Social Media Lead"]
    }[role] || ["Recruiter"];

    return roleTerms.map(title => ({
        label: `${title} at ${company}`,
        link: `https://www.linkedin.com/search/results/people/?keywords=${encodeURIComponent(title + " " + company)}`
    }));
    }

    function showContactsModal(company, role = "engineering") {
    const links = getContactLinks(company, role);
    const body = document.getElementById("contacts-body");
    body.innerHTML = links.map(link =>
        `<p><a href="${link.link}" target="_blank">ðŸ”— ${link.label}</a></p>`
    ).join('');
    document.getElementById("contacts-modal").style.display = "flex";
    }

    function hideContactsModal() {
    document.getElementById("contacts-modal").style.display = "none";
    }
    window.onclick = function(e) {
    const modal = document.getElementById("contacts-modal");
    if (e.target === modal) hideContactsModal();
    };
  </script>
</body>
</html>
<!-- Contact Suggestions Modal -->
<div id="contacts-modal" style="
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
  z-index: 9999;
">
  <div style="
    background: white;
    border-radius: 10px;
    padding: 24px;
    max-width: 400px;
    width: 90%;
    font-family: sans-serif;
    text-align: left;
  ">
    <h2>Suggested Contacts</h2>
    <div id="contacts-body" style="margin-top: 12px;"></div>
    <button onclick="hideContactsModal()" style="
      margin-top: 20px;
      padding: 10px 20px;
      border: none;
      background: #111;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    ">Close</button>
  </div>
</div>